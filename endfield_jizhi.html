<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>终末地 - 基质数据</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        h2 { text-align: center; margin-top: 0.5rem; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background: #f4f4f4; }
        select { margin: 0 8px 8px 0; }
    </style>
</head>
<body>
    <h2>基质数据表格</h2>
    <div class="container">
    <table id="weaponTable">
        <thead>
            <tr>
                <th>
                    武器
                </th>
                <th>
                    <div class="header-with-filter">星级
                        <select id="starFilter">
                            <option value="">全部</option>
                            <option value="6星">6星</option>
                            <option value="5星">5星</option>
                        </select>
                    </div>
                </th>
                <th>
                    <div class="header-with-filter">毕业词条1
                        <select id="attr1Filter"></select>
                    </div>
                </th>
                <th>
                    <div class="header-with-filter">毕业词条2
                        <select id="attr2Filter"></select>
                    </div>
                </th>
                <th>
                    <div class="header-with-filter">毕业词条3
                        <select id="attr3Filter"></select>
                    </div>
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- 数据行将由JS生成 -->
        </tbody>
    </table>
    </div>
    <script>
        // CSV数据
        const csvData = `武器,星级,毕业词条1,毕业词条2,毕业词条3
白夜新星,6星,主能力,源石技艺,附术
显赫声名,6星,主能力,物理伤害,残暴
热熔切割器,6星,意志,攻击,流转
扶摇,6星,主能力,暴击率,夜幕
黯色火炬,6星,智识,灼热伤害,附术
熔铸火焰,6星,智识,攻击,夜幕
不知归,6星,意志,攻击,流转
宏愿,6星,敏捷,攻击,附术
仰止,5星,敏捷,物理伤害,夜幕
O.B.J.轻芒,5星,敏捷,攻击,流转
十二问,5星,敏捷,攻击,附术
逆鳞3.0,5星,力量,寒冷伤害,压制
坚城铸造者,5星,智识,终结技效率,昂扬
钢铁余音,5星,敏捷,物理伤害,巧技
破碎君王,6星,力量,暴击率,粉碎
昔日精品,6星,意志,生命,效益
典范,6星,主能力,攻击,压制
赫拉芬格,6星,力量,攻击,迸发
大雷斑,6星,力量,生命,医疗
O.B.J.重荷,5星,力量,生命,效益
终点之声,5星,力量,生命,医疗
古渠,5星,力量,源石技艺,残暴
探骊,5星,力量,终结技效率,迸发
J.E.T.,6星,主能力,攻击,压制
骁勇,6星,敏捷,物理伤害,巧技
负山,6星,敏捷,物理伤害,效益
向心之引,5星,意志,电磁伤害,压制
O.B.J.尖峰,5星,意志,物理伤害,附术
嵌合正义,5星,力量,终结技效率,残暴
楔子,6星,主能力,暴击率,附术
同类相食,6星,主能力,法术伤害,附术
领航者,6星,智识,寒冷伤害,附术
艺术暴君,6星,智识,暴击率,切骨
理性告别,5星,力量,灼热伤害,追袭
O.B.J.迅极,5星,敏捷,终结技效率,迸发
作品众生,5星,敏捷,法术伤害,附术
骑士精神,6星,意志,生命,医疗
遗忘,6星,智识,法术伤害,夜幕
爆破单元,6星,主能力,源石技艺,迸发
作品蚀迹,6星,意志,自然伤害,压制
沧溟星梦,6星,智识,治疗效率,附术
使命必达,6星,意志,终结技效率,追袭
O.B.J.术识,5星,智识,源石技艺,追袭
布道自由,5星,意志,治疗效率,医疗
迷失荒野,5星,智识,电磁伤害,附术
莫奈何,5星,意志,终结技效率,昂扬
悼亡诗,5星,智识,攻击,夜幕`;

        // 解析CSV
        function parseCSV(data) {
            const lines = data.trim().split('\n');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(',');
                return headers.reduce((obj, h, i) => {
                    obj[h] = values[i];
                    return obj;
                }, {});
            });
        }

        const data = parseCSV(csvData);

        // 获取所有词条选项
        function getUniqueOptions(key) {
            return [...new Set(data.map(item => item[key]))].sort();
        }

        // 初始化表头内筛选下拉框
        function initFilters() {
            ['毕业词条1', '毕业词条2', '毕业词条3'].forEach((key, idx) => {
                const select = document.getElementById(`attr${idx+1}Filter`);
                select.innerHTML = '<option value="">全部</option>' +
                    getUniqueOptions(key).map(opt => `<option value="${opt}">${opt}</option>`).join('');
            });
        }

        // 渲染表格
        function renderTable() {
            const star = document.getElementById('starFilter').value;
            const attr1 = document.getElementById('attr1Filter').value;
            const attr2 = document.getElementById('attr2Filter').value;
            const attr3 = document.getElementById('attr3Filter').value;
            const tbody = document.querySelector('#weaponTable tbody');
            tbody.innerHTML = data.filter(item => {
                return (!star || item['星级'] === star) &&
                       (!attr1 || item['毕业词条1'] === attr1) &&
                       (!attr2 || item['毕业词条2'] === attr2) &&
                       (!attr3 || item['毕业词条3'] === attr3);
            }).map(item => `
                <tr>
                    <td>${item['武器']}</td>
                    <td>${item['星级']}</td>
                    <td>${item['毕业词条1']}</td>
                    <td>${item['毕业词条2']}</td>
                    <td>${item['毕业词条3']}</td>
                </tr>
            `).join('');
        }

        // 事件绑定
        function bindEvents() {
            document.getElementById('starFilter').addEventListener('change', renderTable);
            document.getElementById('attr1Filter').addEventListener('change', renderTable);
            document.getElementById('attr2Filter').addEventListener('change', renderTable);
            document.getElementById('attr3Filter').addEventListener('change', renderTable);
        }

        // 初始化
        initFilters();
        bindEvents();
        renderTable();
    </script>
    <style>
        .container { max-width: 900px; margin: 0 auto; }
        .header-with-filter { display:flex; align-items:center; gap:8px; justify-content:center; }
        .header-with-filter select { font-size:0.9rem; }
    </style>
</body>
</html>